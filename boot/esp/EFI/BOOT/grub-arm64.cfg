# Phase Boot - GRUB Configuration for ARM64
# Used with Parallels on Apple Silicon

set timeout=5
set default=0

# For EFI boot, use the partition where GRUB is located
# Don't search - just use current root

# Internet Mode - Full network connectivity
menuentry "Phase Boot — Internet Mode" {
    echo "Loading kernel..."
    linux /vmlinuz-arm64 console=tty0 console=ttyAMA0,115200 earlyprintk phase.mode=internet phase.channel=stable
    echo "Loading initramfs..."
    initrd /initramfs-arm64.img
    echo "Booting..."
}

# Local Mode - Cached operation
menuentry "Phase Boot — Local Mode" {
    linux /vmlinuz-arm64 console=tty0 console=ttyAMA0,115200 earlyprintk phase.mode=local phase.channel=stable phase.cache=enabled
    initrd /initramfs-arm64.img
}

# Private Mode - Maximum privacy
menuentry "Phase Boot — Private Mode" {
    linux /vmlinuz-arm64 console=tty0 console=ttyAMA0,115200 earlyprintk phase.mode=private phase.cache=disabled phase.nowrite=true
    initrd /initramfs-arm64.img
}
